(window.webpackJsonp=window.webpackJsonp||[]).push([[25,21],{524:function(t,e,n){"use strict";n.r(e);n(71),n(3),n(11),n(32),n(34);var o={name:"KyberMap",props:["items","mapId","current_x","current_y"],data:function(){return{mymap:null,current:null,comerceIcon:null,userIcon:null,currentIcon:null,level_1:null,level_2:null,level_3:null}},watch:{current_x:function(t){console.log("change!!!",t),this.mymap.setView([t,this.current_y],17),L.marker([t,this.current_y],{icon:this.currentIcon}).addTo(this.mymap)},current_y:function(t){this.mymap.setView([this.current_x,t],17),L.marker([this.current_x,t],{icon:this.currentIcon}).addTo(this.mymap)},items:function(t){console.log("ITEMS"),this.reloadItems(t)}},mounted:function(){this.mymap=L.map("map-wrap_component_".concat(this.mapId)).setView([this.current_x,this.current_y],17),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'© <a href="https://www.mapbox.com/about/maps/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a></strong>',tileSize:512,maxZoom:18,zoomOffset:-1,id:"mapbox/streets-v11",accessToken:"pk.eyJ1IjoibmFjaG9hbSIsImEiOiJja3dnenE4eWQwdHNkMnFuc2Nyamg1amxkIn0.uo9JTabPMLxc9lyKQL1Cvg"}).addTo(this.mymap);var t=.4,e=L.Icon.extend({options:{iconUrl:"comerce_icon.png",iconSize:[56,70.4]}}),n=L.Icon.extend({options:{iconUrl:"user_icon.png",iconSize:[55.6,69.2]}}),o=L.Icon.extend({options:{iconUrl:"current.png",iconSize:[32,101*t]}}),r=L.Icon.extend({options:{iconUrl:"level_1_icon.png",iconSize:[53.2,131*t]}}),c=L.Icon.extend({options:{iconUrl:"level_2_icon.png",iconSize:[53.2,131*t]}}),l=L.Icon.extend({options:{iconUrl:"level_3_icon.png",iconSize:[53.2,131*t]}});this.level_1=new r,this.level_2=new c,this.level_3=new l,this.comerceIcon=new e,this.userIcon=new n,this.currentIcon=new o,this.current=L.marker([this.current_x,this.current_y],{icon:this.currentIcon}).addTo(this.mymap),this.items&&this.reloadItems(this.items),console.log(this.items)},methods:{reloadItems:function(t){var e=this;t.forEach((function(t){var n=L.marker(t.coordinates,{icon:"1"===t.type?e.level_1:"2"===t.type?e.level_2:e.level_3}).addTo(e.mymap).bindPopup('<span style="font-weight: bold;font-size: 15px;">'.concat(t.name,"</span><br/><br/><span>").concat(t.time,"</span>"));n.on("click",(function(o){n.openPopup(),e.$emit("click_item",t)}))}))}}},r=n(24),component=Object(r.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-wrap_component_"+this.mapId}})}),[],!1,null,"b15629c0",null);e.default=component.exports},620:function(t,e,n){"use strict";n.r(e);var o=n(527),r=n(531),c=n(533),l={components:{BlueMainPage:o.default,BlueCard:r.default,CustomList:c.default},fetch:function(){this.user=this.$store.state.user},data:function(){return{user:{},current_x:40.4102386,current_y:-3.7262625,last_events:[],last_events_loading:!1,items:[{id:"001",name:"Sistema de provisión fotovoltaica",location:"Finca 7213",qr:"qr_ex.png",status:"COMPLETED",kw:50},{id:"002",name:"Aislamiento termico ventanas",location:"Finca 7213",qr:"qr_ex.png",status:"COMPLETED",kw:30},{id:"003",name:"Sistema domotica",location:"Finca 7213",qr:"qr_ex.png",status:"COMPLETED",kw:10}]}}},m=n(24),d=n(49),_=n.n(d),h=n(615),f=n(510),y=n(513),v=n(511),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BlueMainPage",{attrs:{title:"Mi Casa"},scopedSlots:t._u([{key:"default",fn:function(){return[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("blue-card",{attrs:{title:""},scopedSlots:t._u([{key:"body",fn:function(){return[t._v("\n\t\t\t\t\t\t\t"+t._s(t.last_item)+"\n\t\t\t\t\t\t\t"),n("KyberMap",{staticStyle:{height:"100px"},attrs:{mapId:"comercio",items:[],current_x:t.current_x,current_y:t.current_y},on:{click_item:t.click_item}})]},proxy:!0}])})],1)],1),t._v(" "),n("v-row",{staticClass:"mt-8",attrs:{"no-gutters":""}},[n("v-alert",{staticStyle:{width:"100%"},attrs:{elevation:"8",color:"green",prominent:"",type:"info"}},[t._v(" Recuerda que cuanto mas instalaciones que mejoren la eficiencia energetica o ahorre mas Kw energia ganaras")])],1),t._v(" "),t._l(t.items,(function(t){return n("kyber-card",{key:t.id,attrs:{item:t}})}))],2)]},proxy:!0}])})}),[],!1,null,"095e5988",null);e.default=component.exports;_()(component,{KyberMap:n(524).default,KyberCard:n(547).default}),_()(component,{VAlert:h.a,VCol:f.a,VContainer:y.a,VRow:v.a})}}]);